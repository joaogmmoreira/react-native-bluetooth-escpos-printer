// Em android/build.gradle do SEU FORK (VERSÃO FINALMENTE CORRIGIDA)

apply plugin: 'com.android.library'

// Adiciona as configurações padrão do React Native
// ESTA É A LINHA CORRIGIDA COM O CAMINHO MODERNO
apply from: '../../react-native/android/com/facebook/react/react.gradle'

android {
    // Namespace é obrigatório em versões modernas do Android Gradle Plugin
    namespace "cn.jystudio.bluetooth"

    // As versões de SDK são herdadas do projeto principal para garantir compatibilidade
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion

    defaultConfig {
        // minSdkVersion e targetSdkVersion também são herdados
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
    }
    
    lintOptions {
        abortOnError false
    }

    sourceSets {
        main {
            aidl.srcDirs = ['src/main/java']
        }
    }
}

// Repositórios modernos e necessários
repositories {
    google()
    mavenCentral()
}

dependencies {
    // Dependência padrão do React Native
    implementation 'com.facebook.react:react-native:+'

    // Substituímos a antiga 'support-v4' pela equivalente moderna do AndroidX
    implementation 'androidx.appcompat:appcompat:1.6.1'

    // Mantemos a dependência original para o leitor de código de barras
    implementation "com.google.zxing:core:3.3.0"
}